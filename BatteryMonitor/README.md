# BatteryMonitor

> –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∞—Ç–∞—Ä–µ–∏ –Ω–∞ macOS / iOS / iPadOS

![macOS](https://img.shields.io/badge/macOS-12+-blue.svg)

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `BatteryMonitor` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∑–∞—Ä—è–¥–∞ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞ –≤ –≤–∏–¥–µ –∫—Ä—É–≥–æ–≤–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞, –∞ —Ç–∞–∫–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è (–æ—Ç —Å–µ—Ç–∏ –∏–ª–∏ –æ—Ç –±–∞—Ç–∞—Ä–µ–∏). –¶–≤–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è –∑–∞—Ä—è–¥–∞:

- üî¥ –ö—Ä–∞—Å–Ω—ã–π ‚Äî –º–µ–Ω–µ–µ 20%
- üü† –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî –æ—Ç 20% –¥–æ 49%
- üü° –ñ—ë–ª—Ç—ã–π ‚Äî –æ—Ç 50% –¥–æ 79%
- üü¢ –ó–µ–ª—ë–Ω—ã–π ‚Äî –æ—Ç 80% –∏ –≤—ã—à–µ

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø–∏—Ç–∞–Ω–∏—è via `IOKit` (`IOPSNotification`).

## üß∞ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- –Ø–∑—ã–∫: **Swift** (–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å, ` SwiftUI`, `Combine`, `@MainActor`)
- UI: **SwiftUI**
- –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø: **IOKit** (`IOKit.ps`)
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: **MVVM** (`BatteryViewModel`, `BatteryManager`)
- –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã: **macOS 12+**, **iOS/iPadOS 15+**

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- `@StateObject` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º `ObservableObject`
- `@Published` –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
- `Timer` + run loop notification –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `IOPSNotificationCreateRunLoopSource()` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø–∏—Ç–∞–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

